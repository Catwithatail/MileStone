<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Payments - FreelancePro</title>
    <link
      rel="stylesheet"
      href="/css/FreelancerD/static_elements/sidebar.css"
    />
    <link rel="stylesheet" href="/css/FreelancerD/payment_style.css" />
  </head>
  <body>
    <div class="dashboard-wrapper">
      <!-- Sidebar -->
      <%- include('./partials/sidebar', {activePage: 'payment'}) %>

      <!-- Main Content Area -->
      <div class="main-content">
        <!-- Payments Section -->
        <div id="payments" class="content-section active">
          <div class="header">
            <h2>Payments</h2>
            <p></p>
          </div>

          <div class="payment-content">
            <!-- Current Subscription -->
            <div class="payment-section">
              <h4>Current Subscription</h4>
              <div class="subscription-details">
                <p><strong>Plan:</strong> <%= payments.subscription.plan %></p>
                <p>
                  <strong>Amount:</strong> <%= payments.subscription.amount %>
                </p>
                <p>
                  <strong>Next Billing Date:</strong> <%=
                  payments.subscription.next_billing_date %>
                </p>
                <a
                  href="/freelancerD/subscription"
                  class="manage-subscription-btn"
                >
                  Manage Subscription
                </a>
              </div>
            </div>

            <!-- Rest of the content -->
            <!-- Payment Methods -->
            <div class="payment-section">
              <h4>Payment Methods</h4>
              <div class="payment-methods">
                <% payments.methods.forEach(method => { %>
                <div class="payment-method">
                  <i class="fab fa-cc-<%= method.type.toLowerCase() %>"></i>
                  <span
                    ><%= method.type %> ending in <%= method.last_four %></span
                  >
                  <span class="expiry-date">Exp: <%= method.expiry %></span>
                  <button class="remove-method-btn">Remove</button>
                </div>
                <% }); %>
              </div>
              <div class="add-payment-method">
                <h5>Add New Payment Method</h5>
                <form id="payment-form">
                  <div class="form-group">
                    <label for="card-number">Card Number</label>
                    <input
                      type="text"
                      id="card-number"
                      placeholder="1234 5678 9012 3456"
                      required
                    />
                  </div>
                  <div class="form-group">
                    <label for="card-holder">Card Holder Name</label>
                    <input
                      type="text"
                      id="card-holder"
                      placeholder="<%= user.name %>"
                      required
                    />
                  </div>
                  <div class="form-row">
                    <div class="form-group">
                      <label for="expiry-date">Expiry Date</label>
                      <input
                        type="text"
                        id="expiry-date"
                        placeholder="MM/YY"
                        required
                      />
                    </div>
                    <div class="form-group">
                      <label for="cvv">CVV</label>
                      <input type="text" id="cvv" placeholder="123" required />
                    </div>
                  </div>
                  <button type="submit" class="add-method-btn">
                    Add Payment Method
                  </button>
                </form>
              </div>
            </div>

            <!-- Payment History -->
            <div class="payment-section">
              <h4>Payment History</h4>
              <table class="payment-history-table">
                <thead>
                  <tr>
                    <th>Date</th>
                    <th>Description</th>
                    <th>Amount</th>
                    <th>Status</th>
                    <th>Receipt</th>
                  </tr>
                </thead>
                <tbody>
                  <% payments.history.forEach(payment => { %>
                  <tr>
                    <td><%= payment.date %></td>
                    <td><%= payment.description %></td>
                    <td><%= payment.amount %></td>
                    <td class="status <%= payment.status.toLowerCase() %>">
                      <%= payment.status %>
                    </td>
                    <td>
                      <a href="<%= payment.receipt_link %>" class="view-receipt"
                        ><%= payment.status === 'Failed' ? 'Retry Payment' :
                        'View Receipt' %></a
                      >
                    </td>
                  </tr>
                  <% }); %>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
